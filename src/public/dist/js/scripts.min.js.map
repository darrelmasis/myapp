{"version":3,"names":[],"mappings":"","sources":["scripts.min.js"],"sourcesContent":["!function(){return function e(t,r,n){function a(i,s){if(!r[i]){if(!t[i]){var u=\"function\"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error(\"Cannot find module '\"+i+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){return a(t[i][1][e]||e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var o=\"function\"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}}()({1:[function(e,t,r){var n=function(e){\"use strict\";var t,r=Object.prototype,n=r.hasOwnProperty,a=\"function\"==typeof Symbol?Symbol:{},o=a.iterator||\"@@iterator\",i=a.asyncIterator||\"@@asyncIterator\",s=a.toStringTag||\"@@toStringTag\";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},\"\")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new A(n||[]);return o._invoke=function(e,t,r){var n=d;return function(a,o){if(n===h)throw new Error(\"Generator is already running\");if(n===v){if(\"throw\"===a)throw o;return O()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=_(i,r);if(s){if(s===p)continue;return s}}if(\"next\"===r.method)r.sent=r._sent=r.arg;else if(\"throw\"===r.method){if(n===d)throw n=v,r.arg;r.dispatchException(r.arg)}else\"return\"===r.method&&r.abrupt(\"return\",r.arg);n=h;var u=l(e,t,r);if(\"normal\"===u.type){if(n=r.done?v:f,u.arg===p)continue;return{value:u.arg,done:r.done}}\"throw\"===u.type&&(n=v,r.method=\"throw\",r.arg=u.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:\"normal\",arg:e.call(t,r)}}catch(e){return{type:\"throw\",arg:e}}}e.wrap=c;var d=\"suspendedStart\",f=\"suspendedYield\",h=\"executing\",v=\"completed\",p={};function m(){}function y(){}function g(){}var b={};u(b,o,function(){return this});var w=Object.getPrototypeOf,L=w&&w(w(k([])));L&&L!==r&&n.call(L,o)&&(b=L);var x=g.prototype=m.prototype=Object.create(b);function E(e){[\"next\",\"throw\",\"return\"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;this._invoke=function(a,o){function i(){return new t(function(r,i){!function r(a,o,i,s){var u=l(e[a],e,o);if(\"throw\"!==u.type){var c=u.arg,d=c.value;return d&&\"object\"==typeof d&&n.call(d,\"__await\")?t.resolve(d.__await).then(function(e){r(\"next\",e,i,s)},function(e){r(\"throw\",e,i,s)}):t.resolve(d).then(function(e){c.value=e,i(c)},function(e){return r(\"throw\",e,i,s)})}s(u.arg)}(a,o,r,i)})}return r=r?r.then(i,i):i()}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,\"throw\"===r.method){if(e.iterator.return&&(r.method=\"return\",r.arg=t,_(e,r),\"throw\"===r.method))return p;r.method=\"throw\",r.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return p}var a=l(n,e.iterator,r.arg);if(\"throw\"===a.type)return r.method=\"throw\",r.arg=a.arg,r.delegate=null,p;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,\"return\"!==r.method&&(r.method=\"next\",r.arg=t),r.delegate=null,p):o:(r.method=\"throw\",r.arg=new TypeError(\"iterator result is not an object\"),r.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(P,this),this.reset(!0)}function k(e){if(e){var r=e[o];if(r)return r.call(e);if(\"function\"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:O}}function O(){return{value:t,done:!0}}return y.prototype=g,u(x,\"constructor\",g),u(g,\"constructor\",y),y.displayName=u(g,s,\"GeneratorFunction\"),e.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===y||\"GeneratorFunction\"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,\"GeneratorFunction\")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,i,function(){return this}),e.AsyncIterator=S,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new S(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},E(x),u(x,s,\"Generator\"),u(x,o,function(){return this}),u(x,\"toString\",function(){return\"[object Generator]\"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)\"t\"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type=\"throw\",s.arg=e,r.next=n,a&&(r.method=\"next\",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if(\"root\"===i.tryLoc)return a(\"end\");if(i.tryLoc<=this.prev){var u=n.call(i,\"catchLoc\"),c=n.call(i,\"finallyLoc\");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error(\"try statement without catch or finally\");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,\"finallyLoc\")&&this.prev<a.finallyLoc){var o=a;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(\"throw\"===n.type){var a=n.arg;T(r)}return a}}throw new Error(\"illegal catch attempt\")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},\"next\"===this.method&&(this.arg=t),p}},e}(\"object\"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(e){\"object\"==typeof globalThis?globalThis.regeneratorRuntime=n:Function(\"r\",\"regeneratorRuntime = r\")(n)}},{}],2:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.nomProp=r.passVerify=r.removeAttributes=r.addAttributes=r.createCustomElement=r.select=void 0;var n=document.getElementById.bind(document),a=document.querySelector.bind(document),o=document.querySelectorAll.bind(document);r.select=function(e){var t=\"\";switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"id\"){case\"q\":t=a(e);break;case\"all\":t=o(e);break;default:t=n(e)}return t};r.createCustomElement=function(e,t,r){var n=document.createElement(e);return void 0!==r&&r.forEach(function(e){e.nodeType?1!==e.nodeType&&11!==e.nodeType||n.appendChild(e):n.innerHTML+=e}),i(n,t),n};var i=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])};r.addAttributes=i;r.removeAttributes=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.removeAttribute(r,t[r])};r.passVerify=function(e,t){return(\"\"!=e||\"\"!=t)&&e===t};r.nomProp=function(e){var t=[];return e.split(\" \").forEach(function(e){e.toLowerCase(),t.push(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())}),t.toString().replace(\",\",\"\")}},{}],3:[function(e,t,r){\"use strict\";function n(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}Object.defineProperty(r,\"__esModule\",{value:!0}),r.default=void 0;var a=function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},navigator.geolocation){e.next=5;break}console.warn(\"La geolocalización no está disponible\"),e.next=16;break;case 5:return r=function(){return new Promise(function(e,r){return navigator.geolocation.getCurrentPosition(e,r,t)})},e.prev=6,e.next=9,r();case 9:return n=e.sent,e.abrupt(\"return\",n);case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:case\"end\":return e.stop()}},e,null,[[6,13]])}),function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,u,\"next\",e)}function u(e){n(i,a,o,s,u,\"throw\",e)}s(void 0)})});return function(){return t.apply(this,arguments)}}();r.default=a},{}],4:[function(e,t,r){\"use strict\";function n(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}Object.defineProperty(r,\"__esModule\",{value:!0}),r.postData=void 0;var a=function(){var e,t=(e=regeneratorRuntime.mark(function e(t,r,n){var a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append(\"Content-Type\",\"application/json\"),o={method:r,headers:a,body:JSON.stringify(n)},e.next=5,fetch(t,o);case 5:return e.next=7,e.sent.json();case 7:return i=e.sent,e.abrupt(\"return\",i);case 9:case\"end\":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,u,\"next\",e)}function u(e){n(i,a,o,s,u,\"throw\",e)}s(void 0)})});return function(e,r,n){return t.apply(this,arguments)}}();r.postData=a},{}],5:[function(e,t,r){\"use strict\";var n=e(\"./modules/dom\"),a=s(e(\"regenerator-runtime\")),o=e(\"./modules/postData\"),i=s(e(\"./modules/geolocation\"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,s,\"next\",e)}function s(e){u(o,n,a,i,s,\"throw\",e)}i(void 0)})}}var l=(0,n.select)(\"signinForm\"),d=(0,n.select)(\"signupForm\"),f=(0,n.select)(\"searchForm\"),h=function(){var e=c(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.postData)(\"/signup\",\"POST\",t);case 2:return r=e.sent,e.abrupt(\"return\",r);case 4:case\"end\":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();d&&d.addEventListener(\"submit\",function(e){e.preventDefault(),(0,n.addAttributes)(btnSubmit,{disabled:\"\"}),btnSubmit.value=\"Registrando...\";var t=(0,n.passVerify)(password.value,passwordVerify.value),r={fullName:(0,n.nomProp)(firstname.value)+\" \"+(0,n.nomProp)(lastname.value),username:email.value.substr(0,email.value.indexOf(\"@\")).toLowerCase(),email:email.value.toLowerCase(),password:t,gender:(0,n.nomProp)(d.gender.value)};r.password=!0===t?password.value:\"\",h(r).then(function(e){\"error\"===e.type||\"empty\"===e.type?(messages.classList.remove(\"text-success\"),messages.classList.add(\"text-danger\"),(0,n.removeAttributes)(btnSubmit,{disabled:\"\"}),btnSubmit.value=\"Registrarse\"):(messages.classList.remove(\"text-danger\"),messages.classList.add(\"text-success\"),(0,n.removeAttributes)(btnSubmit,{disabled:\"\"}),btnSubmit.value=\"Registrarse\",d.reset(),window.location.href=\"/signin?user=\".concat(e.username)),messages.classList.remove(\"visually-hidden\"),messages.innerHTML=e.message}).catch(function(e){console.log(\"Error: \"+e),btnSubmit.value=\"Registrarse\"})});var v=function(){var e=c(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.postData)(\"/signin\",\"POST\",t);case 2:return r=e.sent,e.abrupt(\"return\",r);case 4:case\"end\":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();l&&l.addEventListener(\"submit\",function(e){e.preventDefault(),btnSubmit.value=\"...Iniciando\",(0,n.addAttributes)(btnSubmit,{disabled:\"\"});var t={username:username.value,password:password.value};v(t).then(function(e){\"error\"===e.type||\"empty\"===e.type?(messages.classList.remove(\"text-success\"),messages.classList.add(\"text-danger\"),btnSubmit.innerHTML='<i class=\"far fa-sign-in-alt me-2\"></i> Iniciar Sesión',(0,n.removeAttributes)(btnSubmit,{disabled:\"\"})):(btnSubmit.innerHTML=\"...Iniciando\",messages.classList.remove(\"text-danger\"),messages.classList.add(\"text-success\"),window.location.href=\"/\"),messages.classList.remove(\"visually-hidden\"),messages.innerHTML=e.message}).catch(function(e){console.log(e)})});var p=function(){var e=c(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.postData)(\"/search\",\"POST\",t);case 2:return r=e.sent,e.abrupt(\"return\",r);case 4:case\"end\":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(f){btnClear.addEventListener(\"click\",function(e){searchBar.value=\"\",btnClear.classList.add(\"visually-hidden\"),resultsData.classList.add(\"visually-hidden\"),searchContainer.classList.remove(\"open\")});var m=10,y=0,g=0;document.addEventListener(\"keydown\",function(e){var t=document.querySelectorAll(\"#searchResults .list-group-item\");t&&(\"ArrowDown\"===e.key?(y<m-1?y++:y=0,g=0===y?m-1:y-1,t[y].classList.add(\"search-item__active\"),t.length>1&&g>-1&&t[g].classList.remove(\"search-item__active\")):\"ArrowUp\"===e.key&&(y<=0?y=m-1:y--,g=y<m-1?y+1:0,t[y].classList.add(\"search-item__active\"),t.length>1&&g>-1&&t[g].classList.remove(\"search-item__active\")))});var b=null,w=\"\",L=[\" \",\"Control\",\"Tab\",\"CapsLock\",\"Shift\",\"Alt\",\"Meta\",\"AltGraph\",\"ContextMenu\",\"ArrowUp\",\"ArrowRight\",\"ArrowDown\",\"ArrowLeft\",\"Insert\",\"Home\",\"PageUp\",\"Delete\",\"End\",\"PageDown\",\"PrintScreen\",\"ScrollLock\",\"Pause\"];searchBar.addEventListener(\"keyup\",function(e){L.includes(e.key)||(btnClear.classList.remove(\"visually-hidden\"),searchSpinner.classList.remove(\"visually-hidden\"),searchIcon.classList.add(\"visually-hidden\"),clearTimeout(b),b=setTimeout(function(){\"\"===(w=searchBar.value.trim())?(btnClear.classList.add(\"visually-hidden\"),searchSpinner.classList.add(\"visually-hidden\"),searchIcon.classList.remove(\"visually-hidden\"),resultsData.classList.add(\"visually-hidden\"),searchContainer.classList.remove(\"open\")):p({searchValue:w}).then(function(e){if(searchSpinner.classList.add(\"visually-hidden\"),searchIcon.classList.remove(\"visually-hidden\"),resultsData.classList.remove(\"visually-hidden\"),searchContainer.classList.add(\"open\"),y=0,g=0,m=e.message.length<=m||1===e.message.length||0===e.message.length?e.message.length:10,e.message.length>0){searchResults.innerHTML=\"\",resultsMessage.innerHTML=\"\",resultsState.innerHTML='<div class=\"text-muted small text-end me-3\">Mostrando '.concat(m,\" resultados de \").concat(e.message.length,\"</div>\");for(var t=0;t<m;t++){var r=e.message[t];if(null!=r){var a='<span class=\"text-truncate\" title=\"'.concat(r.fullName,'\">').concat(r.fullName,\"</span>\"),o=(0,n.createCustomElement)(\"a\",{href:\"/cliente/\".concat(r.customerCode),class:\"align-item-center list-group-item d-flex list-group-item-action border-0\"},[a]);searchResults.appendChild(o)}}document.querySelectorAll(\"#searchResults .list-group-item\")[0].classList.add(\"search-item__active\")}else searchResults.innerHTML=\"\",resultsState.innerHTML=\"\",resultsMessage.innerHTML='<div class=\"text-secondary text-center fw-semibold\">Al parecer, no hay buenas coincidencias para tu búsqueda</div>'}).catch(function(e){console.log(e)})},300))}),f.addEventListener(\"submit\",function(e){e.preventDefault();var t=document.querySelector(\".search-item__active\");location.href=t.href})}(0,i.default)().then(function(e){return console.log(e)})},{\"./modules/dom\":2,\"./modules/geolocation\":3,\"./modules/postData\":4,\"regenerator-runtime\":1}]},{},[5]);"],"file":"scripts.min.js"}