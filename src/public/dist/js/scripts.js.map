{"version":3,"names":[],"mappings":"","sources":["scripts.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addAttributes = exports.createCustomElement = exports.select = void 0;\nvar id = document.getElementById.bind(document);\nvar q = document.querySelector.bind(document);\nvar all = document.querySelectorAll.bind(document);\n/**\r\n * \r\n * @param {string} elementSelector \r\n * @param {int} type \r\n * @returns DOM element\r\n */\n\nvar select = function select(elementSelector) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'id';\n  var domElement = '';\n\n  switch (type) {\n    case 'q':\n      domElement = q(elementSelector);\n      break;\n\n    case 'all':\n      domElement = all(elementSelector);\n      break;\n\n    default:\n      domElement = id(elementSelector);\n      break;\n  }\n\n  return domElement;\n};\n/**\r\n * Crea elementos con atributos e hijos\r\n * @param {DOM element} element \r\n * @param {string} attributes \r\n * @param {string} children \r\n * @returns DOM Element\r\n */\n\n\nexports.select = select;\n\nvar createCustomElement = function createCustomElement(element, attributes, children) {\n  var customElement = document.createElement(element);\n  if (children !== undefined) children.forEach(function (el) {\n    if (el.nodeType) {\n      if (el.nodeType === 1 || el.nodeType === 11) customElement.appendChild(el);\n    } else {\n      customElement.innerHTML += el;\n    }\n  });\n  addAttributes(customElement, attributes);\n  return customElement;\n};\n/**\r\n * Añade un objeto de atributos a un elemento\r\n * @param {DOM element} element \r\n * @param {object} attrObj \r\n */\n\n\nexports.createCustomElement = createCustomElement;\n\nvar addAttributes = function addAttributes(element, attrObj) {\n  for (var attr in attrObj) {\n    if (attrObj.hasOwnProperty(attr)) element.setAttribute(attr, attrObj[attr]);\n  }\n};\n\nexports.addAttributes = addAttributes;\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Storage = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Storage = /*#__PURE__*/function () {\n  function Storage() {\n    _classCallCheck(this, Storage);\n\n    this.defaultItem = 'history';\n\n    if (!this.get(this.defaultItem)) {\n      this.set(this.defaultItem, JSON.stringify([{}]));\n    }\n  }\n\n  _createClass(Storage, [{\n    key: \"get\",\n    value: function get(key) {}\n  }, {\n    key: \"set\",\n    value: function set(key, value) {}\n  }, {\n    key: \"remove\",\n    value: function remove(key) {}\n  }, {\n    key: \"update\",\n    value: function update(currentValue, newValue) {}\n  }]);\n\n  return Storage;\n}();\n\nexports.Storage = Storage;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nvar _dom = require(\"./modules/dom\");\n\nvar _localStorage = require(\"./modules/localStorage\");\n\nvar socket = io();\nvar signinForm = (0, _dom.select)('signinForm');\nvar signupForm = (0, _dom.select)('signupForm'); // const searchForm = select('search-form', 'id')\n// const searchBar = select('search-bar', 'id')\n// const resultData = select('results-data', 'id')\n// const searchResults = select('search-results', 'id')\n// const resultsCount = select('results-count', 'id')\n// const resultsMessage = select('results-message', 'id')\n// const btnClear = select('btn-clear', 'id')\n\nif (signinForm) {\n  signinForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n    var data = {\n      username: username.value,\n      password: password.value\n    };\n    socket.emit('signin', {\n      signin: data\n    });\n  });\n}\n\nif (signupForm) {\n  signupForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n    btnSubmit.value = 'Registrando...';\n    var data = {\n      fullName: firstName.value + ' ' + lastName.value,\n      username: email.value.substr(0, email.value.indexOf('@')),\n      email: email.value,\n      password: password.value\n    };\n    socket.emit('signup', {\n      signup: data\n    });\n    (0, _dom.addAttributes)(btnSubmit, {\n      disabled: ''\n    });\n    socket.on('response', function (res) {\n      var r = res.response;\n      var alertType;\n      var alertTitle;\n\n      if (r.type === 'ok') {\n        alertType = 'success';\n        alertTitle = '¡Enhorabuena!';\n        signupForm.reset(); // TODO REMOVER ATRIBUTO DISABLED \n      } else {\n        alertType = 'danger';\n        alertTitle = '¡Error!';\n      }\n\n      messages.innerHTML = \"<div class=\\\"alert mt-3 alert-\".concat(alertType, \" alert-dismissible fade show\\\" role=\\\"alert\\\">\\n      <strong>\").concat(alertTitle, \" </strong>\").concat(r.message, \"\\n      <button type=\\\"button\\\" class=\\\"btn-close\\\" data-bs-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"></button>\\n    </div>\");\n    });\n  });\n} // if (searchBar) {\n//   const search = select('search', 'id')\n//   let limit = 10\n//   let key = -1;\n//   let prev = -1;\n//   searchBar.addEventListener('keyup', e => {\n//     if (e.key != 'ArrowDown' && e.key != 'ArrowUp') {\n//       if (searchBar.value.trim() === '') {\n//         resultData.classList.add('d-none')\n//         btnClear.classList.add('invisible')\n//         search.classList.remove('open')\n//       } else {\n//         searchIcon ? searchIcon.classList.add('d-none') : null\n//         searchSpinner ? searchSpinner.classList.remove('d-none') : null\n//         socket.emit('search', { value: searchBar.value.trim() })\n//         key = -1\n//         prev = -1\n//         resultData.classList.remove('d-none')\n//         btnClear.classList.remove('invisible')\n//         search.classList.add('open')\n//       }\n//     }\n//   })\n//   document.addEventListener(\"keydown\", (e) => {\n//     let mylist = document.querySelectorAll('.list-group-item');\n//     if (mylist) {\n//       if (e.key === 'ArrowDown') {\n//         key < (limit - 1) ? key++ : key = 0 // Asigna un valor a key para el elemento siguiente\n//         key === 0 ? prev = (limit - 1) : prev = key - 1 // Asigna un valor a prev para el elemento anterior \n//         mylist[key].classList.add(\"search-item__active\"); // Marca como activo el elemento de la lista de resultados\n//         if (mylist.length > 1) {\n//           prev > -1 ? mylist[prev].classList.remove(\"search-item__active\") : null // Desmarca el elemento actibo anterior\n//         }\n//       } else if (e.key === 'ArrowUp') {\n//         key <= 0 ? key = (limit - 1) : key-- // Asigna un valor a key para el elemento Anterior\n//         key < (limit - 1) ? prev = key + 1 : prev = 0\n//         mylist[key].classList.add(\"search-item__active\");\n//         if (mylist.length > 1) {\n//           prev > -1 ? mylist[prev].classList.remove(\"search-item__active\") : null // Desmarca el elemento actibo anterior\n//         }\n//       }\n//     }\n//   });\n//   // searchBar.addEventListener('focus', (e) => {\n//   //   if(searchBar.value != '') {\n//   //     resultData.classList.toggle('d-none')\n//   //   }\n//   // })\n//   searchForm.addEventListener('submit', e => {\n//     e.preventDefault()\n//     const el = document.querySelector('.search-item__active')\n//     location.href = el.href\n//   })\n//   btnClear.addEventListener('click', e => {\n//     search.classList.remove('open')\n//     resultData.classList.add('d-none')\n//     btnClear.classList.add('invisible')\n//     searchBar.value = ''\n//   })\n//   socket.on('search-results', data => {\n//     const results = data.result\n//     if (results.length < limit) {\n//       limit = results.length\n//     } else if (results.length === 1) {\n//       limit = results.length\n//     } else if (results.length === 0) {\n//       limit = 0\n//     } else {\n//       limit = 10\n//     }\n//     if (searchResults.hasChildNodes()) {\n//       while (searchResults.childNodes.length >= 1) {\n//         searchResults.removeChild(searchResults.firstChild)\n//       }\n//     }\n//     if (results.length > 0) {\n//       for (let i = 0; i < limit; i++) {\n//         const customer = results[i]\n//         // const split = customer.fullName.split(' ')\n//         // split.forEach((word, index, array) => {\n//         //   let index1 = word.indexOf(searchBar.value);\n//         //   let index2 = word.indexOf(searchBar.value.toLowerCase());\n//         //   if (index1 != -1) {\n//         //     array[index] = word.replace(new RegExp(searchBar.value, \"gi\"), `<b>${word.substr(index1, searchBar.value.length)}</b>`)\n//         //   } else {\n//         //     array[index] = word.replace(new RegExp(searchBar.value, \"gi\"), `<b>${word.substr(index2, searchBar.value.length)}</b>`)\n//         //   }\n//         // })\n//         // customer.fullName = split.toString().replace(/,/g, ' ')\n//         if (customer != undefined) {\n//           let content = `<span class=\"icon icon-user me-3 d-inline-block\"></span> <!-- <span class=\"ml-3\"><span class=\"text-secondary fw-bold\">${customer.customerCode}</span> -->${customer.fullName}</span>`\n//           let listItem = createCustomElement('a', { href: `/cliente/${customer.customerCode}`, class: 'align-items-center list-group-item d-flex list-group-item-action border-0 rounded-0' }, [content])\n//           searchResults.appendChild(listItem)\n//         }\n//       }\n//       resultsMessage.innerHTML = ''\n//       limit > results.length ? limit = results.length : null\n//       resultsCount.innerHTML = ` <div class=\"text-secondary small text-end me-3\">Mostrando ${limit} resultados de ${results.length}</div>`\n//     } else {\n//       resultsCount.innerHTML = ''\n//       resultsMessage.innerHTML = `<div class=\"text-secondary text-center\">No se han encontrado resultados para tu búsqueda <span class=\"search-criteria\">(${searchBar.value})</span></div>`\n//     }\n//     searchIcon ? searchIcon.classList.remove('d-none') : null\n//     searchSpinner ? searchSpinner.classList.add('d-none') : null\n//   })\n// }\n// if(signinForm) {\n//   signinForm.addEventListener('submit', e => {\n//     e.preventDefault()\n//     const data = {\n//       username: username.value,\n//       password: password.value\n//     }\n//     socket.emit('signin', {data})\n//   })\n// }\n\n},{\"./modules/dom\":1,\"./modules/localStorage\":2}]},{},[3]);\n"],"file":"scripts.js"}