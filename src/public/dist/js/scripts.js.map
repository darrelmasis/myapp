{"version":3,"names":[],"mappings":"","sources":["scripts.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addAttributes = exports.createCustomElement = exports.select = void 0;\nvar id = document.getElementById.bind(document);\nvar q = document.querySelector.bind(document);\nvar all = document.querySelectorAll.bind(document);\n/**\r\n * \r\n * @param {string} elementSelector \r\n * @param {int} type \r\n * @returns DOM element\r\n */\n\nvar select = function select(elementSelector) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'id';\n  var domElement = '';\n\n  switch (type) {\n    case 'q':\n      domElement = q(elementSelector);\n      break;\n\n    case 'all':\n      domElement = all(elementSelector);\n      break;\n\n    default:\n      domElement = id(elementSelector);\n      break;\n  }\n\n  return domElement;\n};\n/**\r\n * Crea elementos con atributos e hijos\r\n * @param {DOM element} element \r\n * @param {string} attributes \r\n * @param {string} children \r\n * @returns DOM Element\r\n */\n\n\nexports.select = select;\n\nvar createCustomElement = function createCustomElement(element, attributes, children) {\n  var customElement = document.createElement(element);\n  if (children !== undefined) children.forEach(function (el) {\n    if (el.nodeType) {\n      if (el.nodeType === 1 || el.nodeType === 11) customElement.appendChild(el);\n    } else {\n      customElement.innerHTML += el;\n    }\n  });\n  addAttributes(customElement, attributes);\n  return customElement;\n};\n/**\r\n * AÃ±ade un objeto de atributos a un elemento\r\n * @param {DOM element} element \r\n * @param {object} attrObj \r\n */\n\n\nexports.createCustomElement = createCustomElement;\n\nvar addAttributes = function addAttributes(element, attrObj) {\n  for (var attr in attrObj) {\n    if (attrObj.hasOwnProperty(attr)) element.setAttribute(attr, attrObj[attr]);\n  }\n};\n\nexports.addAttributes = addAttributes;\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Storage = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Storage = /*#__PURE__*/function () {\n  function Storage() {\n    _classCallCheck(this, Storage);\n\n    this.defaultItem = 'history';\n\n    if (!this.get(this.defaultItem)) {\n      this.set(this.defaultItem, JSON.stringify([{}]));\n    }\n  }\n\n  _createClass(Storage, [{\n    key: \"get\",\n    value: function get(key) {}\n  }, {\n    key: \"set\",\n    value: function set(key, value) {}\n  }, {\n    key: \"remove\",\n    value: function remove(key) {}\n  }, {\n    key: \"update\",\n    value: function update(currentValue, newValue) {}\n  }]);\n\n  return Storage;\n}();\n\nexports.Storage = Storage;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nvar _dom = require(\"./modules/dom\");\n\nvar _localStorage = require(\"./modules/localStorage\");\n\nvar socket = io();\nvar searchForm = (0, _dom.select)('search-form', 'id');\nvar searchBar = (0, _dom.select)('search-bar', 'id');\nvar resultData = (0, _dom.select)('results-data', 'id');\nvar searchResults = (0, _dom.select)('search-results', 'id');\nvar resultsCount = (0, _dom.select)('results-count', 'id');\nvar resultsMessage = (0, _dom.select)('results-message', 'id');\nvar btnClear = (0, _dom.select)('btn-clear', 'id');\nvar spinner = (0, _dom.select)('spinner', 'id');\nvar limit = 10;\nsearchBar.addEventListener('keyup', function (e) {\n  socket.emit('search', {\n    value: searchBar.value.trim()\n  });\n  resultData.classList.remove('d-none');\n  btnClear.classList.remove('d-none');\n\n  if (searchBar.value == '') {\n    resultData.classList.add('d-none');\n    btnClear.classList.add('d-none');\n  }\n}); // Seguir trabajando en el buscador\n\nsearchBar.addEventListener('blur', function (e) {\n  console.log(e.target.id);\n\n  if (searchBar.value != '') {\n    if (e.target.id !== '') {// resultData.classList.toggle('d-none')\n    }\n  }\n});\nsearchBar.addEventListener('focus', function (e) {\n  if (searchBar.value != '') {\n    resultData.classList.toggle('d-none');\n  }\n});\nsearchForm.addEventListener('submit', function (e) {\n  socket.emit('search', {\n    value: searchBar.value.trim()\n  });\n  e.preventDefault();\n});\nbtnClear.addEventListener('click', function (e) {\n  resultData.classList.add('d-none');\n  btnClear.classList.add('d-none');\n  searchBar.value = '';\n});\nsocket.on('search-results', function (data) {\n  spinner.classList.add('d-none');\n  var results = data.result;\n\n  if (results.length < limit) {\n    limit = results.length;\n  } else if (results.length === 1) {\n    limit = results.length;\n  } else if (results.length === 0) {\n    limit = 0;\n  } else {\n    limit = 10;\n  }\n\n  if (searchResults.hasChildNodes()) {\n    while (searchResults.childNodes.length >= 1) {\n      searchResults.removeChild(searchResults.firstChild);\n    }\n  }\n\n  if (results.length > 0) {\n    for (var i = 0; i < limit; i++) {\n      var customer = results[i];\n\n      if (customer != undefined) {\n        var content = (0, _dom.createCustomElement)('div', {\n          id: 'result-box'\n        }, [\"<span class=\\\"icon icon-user me-3 d-inline-block\\\"></span><span class=\\\"ml-3\\\"><span class=\\\"text-secondary\\\">\".concat(customer.customerCode, \"</span> \").concat(customer.fullName, \"</span>\")]);\n        var listItem = (0, _dom.createCustomElement)('a', {\n          href: \"/cliente/\".concat(customer.customerCode),\n          class: 'list-group-item d-flex list-group-item-action border-0 rounded-0'\n        }, [content]);\n        searchResults.appendChild(listItem);\n      }\n    }\n\n    resultsMessage.innerHTML = '';\n    limit > results.length ? limit = results.length : null;\n    resultsCount.innerHTML = \" <span class=\\\"flex-end text-secondary small\\\">Mostrando \".concat(limit, \" resultados de \").concat(results.length, \"</span>\");\n  } else {\n    resultsCount.innerHTML = '';\n    resultsMessage.innerHTML = \"No se han encontrado resultados para tu b\\xFAsqueda <span class=\\\"search-criteria\\\">(\".concat(searchBar.value, \")</span>\");\n  }\n});\n\n},{\"./modules/dom\":1,\"./modules/localStorage\":2}]},{},[3]);\n"],"file":"scripts.js"}